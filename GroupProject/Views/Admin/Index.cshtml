@model IEnumerable<GroupProject.Models.BlogPost>
@{
    ViewBag.Title = "Index";
}
<br />
<h2>Admin Home</h2>
<br />
<div class="container">
    <div>
        <h4>Search Filters</h4>
        <form class="form-horizontal" role="form" id="used-form">
            <div class="row">
                <div class="form-group col-md-4">
                    <label for="searchList" class="col-md-3 col-form-label">
                        Item:
                    </label>
                    <select id="searchList" class="square col-md-7">
                        <option value="default" disabled selected hidden>Select Category</option>
                        <option value="title">Title</option>
                        <option value="id">Blog Post Id</option>
                    </select>

                </div>
                <div class="form-group col-md-5">
                    <label for="SearchTextbox" class="col-md-3 col-form-label">
                        Term:
                    </label>
                    <input type="text" name="Search" id="SearchTextbox" class="square col-md-7" placeholder="Insert Term">
                </div>
                <div class="col-md-3">
                    <a href="#" class="button button1" id="adminSearchButton">Search</a>
                </div>
            </div>
        </form>
    </div>
</div>
<br />

<div class="container">
    <div class="row">
        <div class="col-md-1">
            <p>ID</p>
        </div>
        <div class="col-md-4">
            <p>Title</p>
        </div>
    </div>
</div>

<div class="container posts1">
    @foreach (var post in Model)
    {
        <div class="row">
            <div class="col-md-1">
                <p>@post.BlogPostId</p>
            </div>
            <div class="col-md-4">
                <h3>@post.Title</h3>
            </div>
            <div class="col-md-2">
                <p>@Html.ActionLink("update", "Update", "Admin", new { id = post.BlogPostId }, new { @class = "btn btn-primary" })</p>
            </div>
            <div class="col-md-2">
                <p>@Html.ActionLink("delete", "DeletePost", "Admin", new { id = post.BlogPostId }, new { @class = "btn btn-danger" })</p>
            </div>
        </div>
    }

</div>

@section scripts {
<script>
    $(document).ready(function () {

        $('#adminSearchButton').click(function (event) {
            var category = $("#searchList").val();
            var term = $("#SearchTextbox").val();
            $.ajax({
                type: 'GET',
                url: 'http://localhost:56967/Admin/Search/' + category + '/' + term,
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                success: function (data, status) {
                    $.each(data, function (index, item) {
                        var blogPostId = item.BlogPostId;
                        var title = item.BlogPostTitle;
                        var message = item.BlogPostMessage;
                        var dateAdded = item.DateAdded;
                        var dateEdited = item.DateEdited;
                    })
                },
                error: function (message) {
                    alert(message.responseText)

                }

            })
        })
    });
    </script>
}